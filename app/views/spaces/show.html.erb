<p style="color: green"><%= notice %></p>
<div class="container">
  <div class="d-flex justify-content-between align-self-center mt-3">
    <%= link_to "<< Retour aux espaces", root_path %>
    <div class="button">
       <%= link_to "Edit this space", edit_space_path(@space), class:"btn btn-outline-secondary" %>
       <%= link_to "Destroy this space", space_path(@space), class: "btn btn-outline-danger", remote:true, data: { turbo_confirm: "Are you sure?", turbo_method: :delete } %>
    </div>
  </div>

  <%= render @space %>

  <div class="d-flex flex-row">
    <div class="col-12 col-lg-8 me-5">

      <h3>Métier recherché : <%= @space.space_profession %>
      </h3>

      <p>
        <%= @space.description %>
      </p>

      <h3>Tarifs</h3>
      <div class="tarifs">
        <p>
          <%= @space.price_per_day %> €/jour • <%= @space.price_per_week %> €/semaine • <%= @space.price_per_month %>€/mois
        </p>
      </div>


      <% @space.space_ratings.each do |sr| %>
      <div class="card mt-3" style="width: 18rem;">
        <div class="card-body">
          <h5 class="card-title"><%= sr.rating %> ⭐</h5>
          <p class="card-text"><%= sr.comment %></p>
        </div>
      </div>
      <% end %>
    </div>


    <div class="col-12 col-lg-4">
      <div class="form-wrapper">
        <h3> Réservez votre espace </h3>
        <%= simple_form_for [@space, @booking] do |f| %>
          <%= f.error_notification %>
          <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

          <div class="form-inputs">
            <%= f.input :start_date,
                  label: "Sélectionnez vos dates",
                  as: :string,
                  required: false,
                  input_html: { data: { controller: "datepicker" } } %>
            <%= f.input :end_date,
                  label: false,
                  as: :string,
                  required: false,
                  input_html: { data: { controller: "datepicker" } } %>
          </div>

          <div class="form-actions">
            <%= f.button :submit, class:"btn btn-primary" %>
          </div>
        <% end %>
      </div>

      <div id="bookings" class="mt-3">
        <h3> Vos réservations </h3>
        <% @space.bookings.each do |booking| %>
          <p>Du <%= booking.start_date.strftime("%d" + "/" + "%m" + "/" + "%Y") %> au <%= booking.end_date.strftime("%d" + "/" + "%m" + "/" + "%Y") %> </p>
        <% end %>
      </div>
    </div>
  </div>



<div id="contact">
  <h3> Laisser un commentaire </h3>
  <%= simple_form_for [@space, @space_rating] do |f| %>
    <%= f.error_notification %>
    <%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %>

    <div class="form-inputs">
      <%= f.input :comment %>
      <%= f.input :rating %>
    </div>

    <div class="form-actions">
      <%= f.button :submit %>
    </div>
  <% end %>
</div>
